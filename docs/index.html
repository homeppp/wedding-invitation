<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ìš°ë¦¬ ê²°í˜¼í•´ìš”</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet"> <!-- CSS ë¡œë“œ -->
  <style>
    body {
      background-color: #fdf6f0;
      font-family: 'Noto Sans KR', sans-serif;
    }
    .card {
      border-radius: 1rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .gallery img {
      width: 100%;
      height: auto;
      border-radius: 0.5rem;
    }
  </style>
  <!-- ì¹´ì¹´ì˜¤ ì§€ë„ API -->
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a771daa565683bc6df9101d785f3d702&libraries=LIBRARY"></script>
</head>
<body>

	<button id="toggle-music" class="btn btn-lg btn-outline-primary">
	  <i id="music-icon" class="bi bi-play-circle"></i> ìŒì•… ì¬ìƒ
	</button>
	<audio id="bg-music" loop preload="auto">
	  <source src="assets/music/serenity.mp3" type="audio/mpeg">
	</audio>

<div class="container py-4">

  <!-- ì¸ì‚¬ë§ -->
  <div class="text-center mb-4">
    <h1 class="mb-2">ì €í¬ ê²°í˜¼í•©ë‹ˆë‹¤ ğŸ’</h1>
    <p>2025ë…„ 10ì›” 25ì¼ ì˜¤í›„ 3ì‹œ 30ë¶„</p>
    <p>ë¶€ì‚° ì„¼í…€í”„ë¦¬ë¯¸ì–´ í˜¸í…” ì›¨ë”©í™€</p>
  </div>

  <!-- ì‹ ë‘ì‹ ë¶€ ì†Œê°œ -->
  <div class="row g-3 mb-4">
    <div class="col-6">
      <div class="card p-3 text-center">
        <h5>ì‹ ë‘ í™ì„±ì£¼</h5>
        <p>í•­ìƒ ì›ƒìŒì„ ì£¼ëŠ” ì‚¬ëŒ</p>
      </div>
    </div>
    <div class="col-6">
      <div class="card p-3 text-center">
        <h5>ì‹ ë¶€ ê³ ë¯¸ì •</h5>
        <p>ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì§„ ì‚¬ëŒ</p>
      </div>
    </div>
  </div>

  <!-- RSVP -->
  <div class="card p-4 mb-4">
    <h5 class="mb-3">ì°¸ì„ ì—¬ë¶€ë¥¼ ì•Œë ¤ì£¼ì„¸ìš” ğŸ™</h5>
    <form id="rsvp-form">
      <input type="text" id="rsvp-name" class="form-control mb-2" placeholder="ì´ë¦„" required>
      <select id="rsvp-attend" class="form-select mb-2" required>
        <option value="">ì°¸ì„ ì—¬ë¶€</option>
        <option value="ì°¸ì„í•©ë‹ˆë‹¤">ì°¸ì„í•©ë‹ˆë‹¤</option>
        <option value="ë¶ˆì°¸í•©ë‹ˆë‹¤">ë¶ˆì°¸í•©ë‹ˆë‹¤</option>
      </select>
      <button type="submit" class="btn btn-primary w-100">ì œì¶œ</button>
    </form>
  </div>

  <!-- ë°©ëª…ë¡ -->
  <div class="card p-4 mb-4">
    <h5 class="mb-3">ì¶•í•˜ ë©”ì‹œì§€ ë‚¨ê¸°ê¸° ğŸ‰</h5>
    <form id="guestbook-form">
      <input type="text" id="guest-name" class="form-control mb-2" placeholder="ì´ë¦„" required>
      <textarea id="guest-message" class="form-control mb-2" rows="2" placeholder="ì¶•í•˜ ë©”ì‹œì§€" required></textarea>
      <button type="submit" class="btn btn-success w-100">ë‚¨ê¸°ê¸°</button>
    </form>
    <ul id="guestbook-list" class="mt-3 list-group"></ul>
  </div>

  <!-- ì‚¬ì§„ ê°¤ëŸ¬ë¦¬ -->
  <div class="mb-4">
    <h5 class="mb-2">ìš°ë¦¬ì˜ ìˆœê°„ë“¤ ğŸ“¸</h5>
    <div class="row g-2 gallery">
      <div class="col-6"><img src="assets/photo/dongjak1.jpg" alt="photo1"></div>
      <div class="col-6"><img src="assets/photo/dongjak2.JPG" alt="photo2"></div>
    </div>
  </div>

  <!-- ì¹´ì¹´ì˜¤ ì§€ë„ -->
	<div class="mb-4">
	  <h5 class="mb-2">ì˜¤ì‹œëŠ” ê¸¸ ğŸ“</h5>
	  <p class="text-muted mb-3">ë¶€ì‚° í•´ìš´ëŒ€êµ¬ ì„¼í…€1ë¡œ 17</p> <!-- ì£¼ì†Œ ì¶”ê°€ -->
	  <div id="map" style="width: 100%; height: 300px; border-radius: 1rem; overflow: hidden; border: 2px solid #eee;"></div>
	</div>

</div>

<script>
  // Firebase ì„¤ì •
  const firebaseConfig = {
    apiKey: "AIzaSyAQQF8ma_2pVxieDEWjrw38x6ce81_h8G4",
    authDomain: "wedding-invitation-hong.firebaseapp.com",
    databaseURL: "https://wedding-invitation-hong-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "wedding-invitation-hong",
    storageBucket: "wedding-invitation-hong.appspot.com",
    messagingSenderId: "401179287476",
    appId: "1:401179287476:web:30fd5fcf7127dc8b071ce1",
    measurementId: "G-ENLZ43C4PH"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // RSVP ì œì¶œ
  $('#rsvp-form').submit(function(e) {
    e.preventDefault();
    const name = $('#rsvp-name').val();
    const attend = $('#rsvp-attend').val();
    db.ref('rsvp').push({ name, attend });
    alert("ì°¸ì„ ì—¬ë¶€ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
    this.reset();
  });

  // ë°©ëª…ë¡ ì‘ì„±
  $('#guestbook-form').submit(function(e) {
    e.preventDefault();
    const name = $('#guest-name').val();
    const message = $('#guest-message').val();
    db.ref('guestbook').push({ name, message });
    this.reset();
  });

  // ì‹¤ì‹œê°„ ë°©ëª…ë¡ í‘œì‹œ
  db.ref('guestbook').on('child_added', snapshot => {
    const { name, message } = snapshot.val();
    $('#guestbook-list').prepend(`<li class="list-group-item"><strong>${name}:</strong> ${message}</li>`);
  });

  // URL ê³µìœ 
  function shareUrl() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => alert("ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"));
  }

  // ì¹´ì¹´ì˜¤ ì§€ë„ ì´ˆê¸°í™”
  function initMap() {
    var container = document.getElementById('map');
    var options = {
      center: new kakao.maps.LatLng(35.1669026, 129.1316083), // ì„¼í…€í”„ë¦¬ë¯¸ì–´í˜¸í…” ì¢Œí‘œ
      level: 3
    };
    var map = new kakao.maps.Map(container, options);

    var markerPosition = new kakao.maps.LatLng(35.1669026, 129.1316083);
    var marker = new kakao.maps.Marker({
      position: markerPosition
    });
    marker.setMap(map);

    // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ (ì˜ˆìœ ë§í’ì„  ìŠ¤íƒ€ì¼)
    var content = `
      <div style="padding:10px 15px; background:#fff; border:1px solid #ccc; border-radius:15px; box-shadow:0 2px 6px rgba(0,0,0,0.2); font-size:14px;">
        <strong>ì„¼í…€í”„ë¦¬ë¯¸ì–´í˜¸í…” ì›¨ë”©í™€</strong><br>
        ë¶€ì‚° í•´ìš´ëŒ€êµ¬ ì„¼í…€1ë¡œ 17
      </div>
    `;

    var customOverlay = new kakao.maps.CustomOverlay({
      position: markerPosition,
      content: content,
      yAnchor: 1.5
    });
    customOverlay.setMap(map);
  }

  kakao.maps.load(initMap);

  // ìŒì•… ì œì–´
document.addEventListener('DOMContentLoaded', function() {
  console.log("ë¬¸ì„œ ë¡œë“œ ì™„ë£Œ"); // ì´ ë¶€ë¶„ í™•ì¸
  const toggleMusicButton = document.getElementById('toggle-music');
  const audio = document.getElementById('bg-music');
  const icon = document.getElementById('music-icon');

  if (toggleMusicButton && audio && icon) {
    toggleMusicButton.addEventListener('click', function() {
      console.log("ë²„íŠ¼ í´ë¦­ë¨");

      // ìŒì•…ì´ ì¬ìƒ ì¤‘ì´ë©´ ì¼ì‹œ ì •ì§€í•˜ê³ , ì•„ë‹ˆë©´ ì¬ìƒ
      if (audio.paused) {
        console.log("ìŒì•… ì¬ìƒ ì‹œì‘");
        audio.play();
        icon.classList.remove('bi-play-circle');
        icon.classList.add('bi-pause-circle');
        toggleMusicButton.innerHTML = '<i class="bi bi-pause-circle"></i> ìŒì•… ì¼ì‹œì •ì§€';
      } else {
        console.log("ìŒì•… ì •ì§€");
        audio.pause();
        icon.classList.remove('bi-pause-circle');
        icon.classList.add('bi-play-circle');
        toggleMusicButton.innerHTML = '<i class="bi bi-play-circle"></i> ìŒì•… ì¬ìƒ';
      }
    });
  } else {
    console.error("ë²„íŠ¼, ì˜¤ë””ì˜¤, ì•„ì´ì½˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
  }
});
</script>

</body>
</html>
